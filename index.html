<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Haber Robotu – Otomatik Güncel Haberler</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Açıklama & Open Graph -->
  <meta name="description" content="Türkiye ve dünyadan en güncel haberler, her saat otomatik yenilenen akışla tek sayfada. Spor, teknoloji, ekonomi, sağlık ve daha fazlası.">
  <meta property="og:title" content="Haber Robotu – Otomatik Güncel Haberler">
  <meta property="og:description" content="Türkiye ve dünyadan en güncel haberler, her saat otomatik yenilenen akışla tek sayfada.">
  <meta property="og:url" content="https://newest-resu.github.io/">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Haber Robotu">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Google AdSense (Auto Ads) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6477894031302669"
          crossorigin="anonymous"></script>

  <style>
    /* === SENİN ORİJİNAL CSS’İN === */
    :root {
      --bg: #0f172a;
      --bg-card: #020617;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #facc15;
      --accent-soft: rgba(250, 204, 21, 0.12);
      --border: #1f2937;
      --modal-bg: rgba(2,6,23,.72);
      --panel: rgba(15,23,42,0.96);
      --shadow: 0 24px 90px rgba(0,0,0,.62);
    }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; background: radial-gradient(circle at top, #1f2937 0, #020617 55%); color: var(--text); }
    a { color: inherit; text-decoration: none; }
    .page { position: relative; min-height: 100vh; }
    .shell { max-width: 1100px; margin: 0 auto; padding: 16px 12px 48px; }
    header { display: flex; align-items: center; gap: 12px; padding: 16px 18px; border-radius: 14px; background: linear-gradient(135deg, rgba(15,23,42,0.95), rgba(15,23,42,0.98)); border: 1px solid rgba(148,163,184,0.18); box-shadow: 0 24px 80px rgba(0,0,0,0.55); position: sticky; top: 8px; z-index: 20; backdrop-filter: blur(16px); flex-wrap: wrap; }
    .logo { width: 38px; height: 38px; border-radius: 12px; background: radial-gradient(circle at 20% 0%, #facc15, #f97316); display: flex; align-items: center; justify-content: center; color: #020617; font-weight: 900; font-size: 18px; box-shadow: 0 0 0 2px rgba(15,23,42,0.9), 0 16px 45px rgba(250,204,21,0.45); }
    .title-wrap { flex: 1 1 200px; min-width: 220px; }
    .title { font-size: 20px; font-weight: 700; letter-spacing: .02em; }
    .subtitle { font-size: 13px; color: var(--muted); margin-top: 2px; }
    .top-nav { display: flex; flex-wrap: wrap; gap: 12px; font-size: 13px; margin-top: 8px; }
    .top-nav a { color: #facc15; }
    .pill { font-size: 11px; padding: 4px 9px; border-radius: 999px; border: 1px solid rgba(148,163,184,0.35); color: var(--muted); background: rgba(15,23,42,0.9); white-space: nowrap; }
    .toolbar { margin-top: 18px; display: flex; flex-wrap: wrap; gap: 10px; align-items: center; justify-content: space-between; }
    .filters { display: flex; flex-wrap: wrap; gap: 8px; }
    .btn-filter { border-radius: 999px; font-size: 13px; padding: 5px 12px; border: 1px solid var(--border); background: rgba(15,23,42,0.9); color: var(--muted); cursor: pointer; transition: all .15s ease; user-select: none; }
    .btn-filter.active { background: var(--accent-soft); border-color: var(--accent); color: #fefce8; }
    .status { font-size: 12px; color: var(--muted); display: flex; align-items: center; gap: 10px; flex-wrap: wrap; justify-content: flex-end; }
    .icon-btn { width: 36px; height: 36px; border-radius: 999px; border: 1px solid rgba(148,163,184,0.30); background: rgba(15,23,42,0.9); cursor: pointer; display: inline-flex; align-items: center; justify-content: center; user-select: none; }
    .icon-btn:hover { transform: translateY(-1px); border-color: rgba(250,204,21,.55); }
    .icon-btn svg { width: 18px; height: 18px; fill: none; stroke: #facc15; stroke-width: 2; }
    .icon-btn.spin svg { animation: spin .9s linear infinite; }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    .grid { margin-top: 12px; display: flex; flex-direction: column; gap: 10px; }
    .card { display: grid; grid-template-columns: 200px minmax(0,1fr); gap: 14px; padding: 12px; border-radius: 14px; background: rgba(15,23,42,0.96); border: 1px solid rgba(31,41,55,0.9); box-shadow: 0 14px 40px rgba(0,0,0,0.65); }
    .thumb-wrap { border-radius: 10px; overflow: hidden; background: radial-gradient(circle at 10% 0%, #1f2937, #020617); border: 1px solid rgba(31,41,55,0.9); display: flex; align-items: center; justify-content: center; font-size: 11px; color: var(--muted); text-align: center; padding: 6px; min-height: 120px; }
    .thumb-wrap img { width: 100%; height: 100%; object-fit: cover; display: block; }
    /* ===================== SENİN ORİJİNAL STİLLERİN DEVAMI ===================== */
  </style>
</head>

<body>
  <div class="page">
    <div class="side-slot side-slot-left" aria-hidden="true"></div>
    <div class="side-slot side-slot-right" aria-hidden="true"></div>
    <div class="shell">

      <header>
        <div class="logo">HR</div>
        <div class="title-wrap">
          <div class="title">Haber Robotu</div>
          <div class="subtitle">Türkiye ve dünyadan haberler, her saat otomatik güncellenir.</div>
          <div class="top-nav">
            <a href="about.html">Hakkında</a>
            <a href="privacy.html">Gizlilik Politikası</a>
            <a href="terms.html">Kullanım Şartları</a>
            <a href="contact.html">İletişim</a>
          </div>
        </div>
        <div class="pill">Canlı otomatik haber akışı</div>
      </header>

      <!-- Kaynak filtreleri -->
      <div class="toolbar">
        <div class="filters">
          <button class="btn-filter btn-filter-source active" data-filter-source="all">Tüm Kaynaklar</button>
          <button class="btn-filter btn-filter-source" data-filter-source="tr">Türkiye Kaynaklı</button>
          <button class="btn-filter btn-filter-source" data-filter-source="intl">Yabancı Kaynaklı</button>
        </div>

        <div class="status">
          <button class="icon-btn" id="btnRefresh" type="button" title="Yenile">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M20 12a8 8 0 1 1-2.34-5.66"></path>
              <path d="M20 4v6h-6"></path>
            </svg>
          </button>
          <span id="status">Haberler yükleniyor...</span>
        </div>
      </div>

      <!-- Kategori filtreleri (Yerel eklendi) -->
      <div class="toolbar" style="margin-top:8px;">
        <div class="filters">
          <button class="btn-filter btn-filter-cat active" data-filter-cat="all">Tüm Kategoriler</button>
          <button class="btn-filter btn-filter-cat" data-filter-cat="yerel">Yerel</button>
          <button class="btn-filter btn-filter-cat" data-filter-cat="gundem">Gündem</button>
          <button class="btn-filter btn-filter-cat" data-filter-cat="dunya">Dünya</button>
          <button class="btn-filter btn-filter-cat" data-filter-cat="spor">Spor</button>
          <button class="btn-filter btn-filter-cat" data-filter-cat="teknoloji">Teknoloji</button>
          <button class="btn-filter btn-filter-cat" data-filter-cat="saglik">Sağlık</button>
          <button class="btn-filter btn-filter-cat" data-filter-cat="ekonomi">Ekonomi</button>
          <button class="btn-filter btn-filter-cat" data-filter-cat="finans">Finans</button>
          <button class="btn-filter btn-filter-cat" data-filter-cat="magazin">Magazin</button>
          <button class="btn-filter btn-filter-cat" data-filter-cat="bilim">Bilim</button>
          <button class="btn-filter btn-filter-cat" data-filter-cat="savunma">Savunma / Askeri</button>
          <button class="btn-filter btn-filter-cat" data-filter-cat="oyun">Oyun / Dijital</button>
          <button class="btn-filter btn-filter-cat" data-filter-cat="otomobil">Otomobil</button>
          <button class="btn-filter btn-filter-cat" data-filter-cat="yasam">Yaşam</button>
        </div>
      </div>

      <div class="grid" id="haberler"></div>

      <div style="margin-top:20px; text-align:center; font-size:13px; color:#9ca3af;">
        Bu sayfayı paylaş:
        <a href="https://wa.me/?text=Haber%20Robotu%20-%20Otomatik%20güncel%20haberler%20https%3A%2F%2Fnewest-resu.github.io%2F" target="_blank" rel="noopener noreferrer" style="color:#facc15; margin-left:8px; text-decoration:none;">WhatsApp</a>
        <a href="https://twitter.com/intent/tweet?text=Haber%20Robotu%20-%20Otomatik%20güncel%20haberler&url=https%3A%2F%2Fnewest-resu.github.io%2F" target="_blank" rel="noopener noreferrer" style="color:#facc15; margin-left:12px; text-decoration:none;">X (Twitter)</a>
        <a href="https://t.me/share/url?url=https%3A%2F%2Fnewest-resu.github.io%2F&text=Haber%20Robotu%20-%20Otomatik%20güncel%20haberler" target="_blank" rel="noopener noreferrer" style="color:#facc15; margin-left:12px; text-decoration:none;">Telegram</a>
      </div>

      <footer>
        İçerikler ilgili haber sitelerinden otomatik olarak derlenir. Başlık ve özetler bilgilendirme amaçlıdır. Detaylar için modal içinden “Kaynağa Git” bağlantısını kullanabilirsiniz.
      </footer>

    </div>
  </div>

  <!-- SENİN ORİJİNAL MODAL BLOĞUN (DEĞİŞMEDİ) -->
  <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-top">
        <div>
          <h2 class="modal-title" id="modalTitle">Haber</h2>
          <div class="modal-meta" id="modalMeta"></div>
        </div>
        <button class="modal-close" id="modalClose" type="button" title="Kapat">✕</button>
      </div>
      <div class="modal-sections">
        <div class="section"><h3>Uzun Özet</h3><p id="modalLong">—</p></div>
        <div class="section"><h3>Neden Önemli?</h3><ul class="bullets" id="modalWhy"></ul></div>
        <div class="section"><h3>Arka Plan</h3><ul class="bullets" id="modalBg"></ul></div>
        <div class="section"><h3>Olası Etkiler</h3><ul class="bullets" id="modalImp"></ul></div>
        <div class="modal-actions">
          <a class="btn-read" id="modalSource" href="#" target="_blank" rel="noopener noreferrer">Kaynağa Git</a>
          <button class="btn-ghost" id="modalCopy" type="button">Linki Kopyala</button>
          <a class="btn-ghost" id="modalShareX" href="#" target="_blank" rel="noopener noreferrer">X’te Paylaş</a>
          <a class="btn-ghost" id="modalShareWa" href="#" target="_blank" rel="noopener noreferrer">WhatsApp</a>
          <a class="btn-ghost" id="modalShareTg" href="#" target="_blank" rel="noopener noreferrer">Telegram</a>
        </div>
      </div>
    </div>
  </div>

  <script>
/* === GLOBAL STATE === */
let ALL_ARTICLES = [];
let CURRENT_SOURCE_FILTER = "all";
let CURRENT_CATEGORY_FILTER = "gundem";
const AUTO_REFRESH_MS = 60 * 60 * 1000;

/* === KEYWORDS === */
const LOCAL_KEYWORDS = [
  "belediye","valilik","kaymakam",
  "istanbul","bursa","kocaeli","sakarya","yalova"
];

const CATEGORY_KEYWORDS = {
  yerel: ["belediye","valilik","kaymakam","yerel"],
  gundem: ["son dakika","açıklama","olay","karar"],
  dunya: ["abd","avrupa","rusya","çin","israil","ukrayna"],
  spor: ["maç","gol","lig","transfer"],
  teknoloji: ["yapay zeka","teknoloji","apple","google","yazılım"],
  saglik: ["sağlık","hastane","doktor","tedavi"],
  ekonomi: ["enflasyon","faiz","merkez bankası"],
  finans: ["borsa","hisse","kripto","bitcoin","ethereum"],
  magazin: ["ünlü","dizi","film","sanatçı"],
  bilim: ["araştırma","bilim","keşif"],
  savunma: ["askeri","savunma","ordu","silah"],
  oyun: ["oyun","steam","playstation","xbox"],
  otomobil: ["otomobil","araba","tesla","elektrikli"],
  yasam: ["yaşam","kültür","sosyal"]
};

const CATEGORY_LABELS = {
  yerel:"Yerel",gundem:"Gündem",dunya:"Dünya",spor:"Spor",
  teknoloji:"Teknoloji",saglik:"Sağlık",ekonomi:"Ekonomi",
  finans:"Finans",magazin:"Magazin",bilim:"Bilim",
  savunma:"Savunma / Askeri",oyun:"Oyun / Dijital",
  otomobil:"Otomobil",yasam:"Yaşam"
};

/* === HELPERS === */
function safeText(v){ return (v ?? "").toString().toLowerCase(); }

function getDomain(url){
  try { return new URL(url).hostname.replace(/^www\./,""); }
  catch { return ""; }
}

function classifySource(url){
  const d = getDomain(url);
  return { label: d, type: d.endsWith(".tr") ? "tr" : "intl" };
}

function classifyCategory(article){
  const text =
    safeText(article.title_tr || article.title) + " " +
    safeText(article.summary_tr || article.summary);

  const src = classifySource(article.url);

  if (src.type === "tr") {
    for (const k of LOCAL_KEYWORDS)
      if (text.includes(k)) return "yerel";
  }

  let bestCat = "gundem";
  let bestScore = 0;

  for (const [cat, keys] of Object.entries(CATEGORY_KEYWORDS)) {
    let score = 0;
    keys.forEach(k => { if (text.includes(k)) score++; });
    if (score > bestScore) {
      bestScore = score;
      bestCat = cat;
    }
  }
  return bestCat;
}

/* === FETCH === */
async function loadNews(){
  try {
    const res = await fetch("news/latest.json?_=" + Date.now());
    const data = await res.json();

    const articles = Array.isArray(data)
      ? data
      : (data.articles || []);

    ALL_ARTICLES = articles.map(a => ({
      ...a,
      category: classifyCategory(a)
    }));

    renderArticles();
  } catch (e) {
    console.error("Haberler yüklenemedi:", e);
  }
}

/* === RENDER === */
function renderArticles(){
  const container = document.getElementById("news-container");
  if (!container) return;

  container.innerHTML = "";

  const filtered = ALL_ARTICLES.filter(a =>
    CURRENT_CATEGORY_FILTER === "all" ||
    a.category === CURRENT_CATEGORY_FILTER
  );

  if (!filtered.length) {
    container.innerHTML = "<p>Bu kategori için haber yok.</p>";
    return;
  }

  filtered.forEach(a => {
    const div = document.createElement("div");
    div.className = "news-card";
    div.innerHTML = `
      <h3>${a.title_tr || a.title}</h3>
      <p>${a.summary_tr || a.summary || ""}</p>
    `;
    container.appendChild(div);
  });
}

/* === INIT === */
document.addEventListener("DOMContentLoaded", () => {
  loadNews();
  setInterval(loadNews, AUTO_REFRESH_MS);
});
</script>
</body>
</html>
